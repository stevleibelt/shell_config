#!/bin/bash

# order is important
declare -a FILES_TO_LOAD=('setting' 'variable' 'source' 'export' '_source/function' 'alias' 'automatic_start')

for FILE_TO_LOAD in ${FILES_TO_LOAD[@]}; do
    if [[ "${FILE_TO_LOAD}" == "_source/function" ]];
    then
        #rename FILE_TO_LOAD to ENVIRONMENT_TO_LOAD

        source "${PATH_SHELL_CONFIG}/${FILE_TO_LOAD}/bootstrap"
        LOCAL_LEGACY_FILE_TO_LOAD="function.local"
        LOCAL_FILE_TO_LOAD="local.${FILE_TO_LOAD}"
    else
        source "${PATH_SHELL_CONFIG}/${FILE_TO_LOAD}"
        LOCAL_LEGACY_FILE_TO_LOAD="${FILE_TO_LOAD}.local"
        LOCAL_FILE_TO_LOAD="local.function"
    fi

    if [[ -f "${PATH_SHELL_CONFIG}/${LOCAL_LEGACY_FILE_TO_LOAD}" ]];
    then
        echo "legacy local file name detected, please rename it to local.${FILE_TO_LOAD}"
    fi

    if [[ -f "${PATH_SHELL_CONFIG}/${LOCAL_FILE_TO_LOAD}" ]];
    then
      source "${PATH_SHELL_CONFIG}/${LOCAL_FILE_TO_LOAD}"
    fi
done;
