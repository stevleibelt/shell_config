####
# https://www.gnu.org/software/bash/manual/bash.html
####

#####
# If one value is given, mkdir -p plus cd is called.
# If multiple values are given. mkdir is called.
#
# @param string $# - string name of directory you want to create
#
# @author stev leibelt
# @since 2013-01-05
####
function net_bazzline_mkdir ()
{
    #check if at least one argument is supplied
    if [[ $# -eq 0 ]]; then
        echo "No arguments supplied"
        return 1
    fi

    #if one argument is supplied, create dir and
    # change to it
    if [[ $# -eq 1 ]]; then
        mkdir -p "$1" 
        cd "$1"
        return 0
    fi

    #if more then one argument is supplied
    # execute default mkdir
    if [[ $# -gt 1 ]]; then
        mkdir $@
        return 0
    fi
}

####
# create a directory with a prefix of current date (Ymd)
#
# @param string $1 - directory name you want to create
#
# @author stev leibelt
# @since 2013-03-08
####
function net_bazzline_mkdirPrefixCurrentDate ()
{
    if [[ $# -eq 1 ]]; then
        directoryName=`eval date +%y%m%d`"_$1"

        net_bazzline_mkdir "$directoryName"
    else
        echo 'Should be called with exactly one parameter'
    fi
}

#####
# You can change $i levels by using cd $i
#
# @param mixed $1 - [optional] path where you want do change
#                       or number of directories you want to
#                       change upwards - default is $HOME
#
# @author stev leibelt
# @since 2013-01-30
####
function net_bazzline_cd ()
{
    #is numeric value?
    if [[ $# -eq 0 ]]; then 
        cd "$HOME"
    elif [[ `expr $1 + 1 2> /dev/null` ]]; then
        for (( i=1; i <= $1; i++))
        do
            cd ..
        done
    else
        cd "$1"
    fi
}

#####
# Combines ps aux and grep
#
# @param string $1 - pattern your are searching for
#
# @author stev leibelt
# @since 2013-01-30
####
function net_bazzline_psgrep ()
{
    if [[ $# -eq 1 ]]; then
        ps aux | grep "$1"
    fi
}

#####
# Calls svn diff for two repositories.
# Call $repositoryUrlOne $repositoryUrlTwo $filePath
#
# @param string $1 - first repository
# @param string $2 - second repository
# @param string $3 - path of file to diff
#
# @author stev leibelt
# @since 2013-01-30
####
function net_bazzline_svn_diff ()
{
    if [[ $# -eq 3 ]]; then
        svn diff "$1""/""$3" "$2""/""$3"
    else
        echo 'No valid arguments supplied'
        echo 'repositoryUrlOne repositoryUrlTwo filePath'
    fi
}

####
# compress given directories into tar.gz
#
# @param string $1 - compressed tar.gz file name
# @param string $# - [all following] files for compressed file
#
# @author stev leibelt
# @since 2013-02-02
####
function net_bazzline_compress ()
{
    if [[ $# -lt 1 ]]; then
        echo 'No valid arguments supplied.'

        exit 1
    fi

    FILENAME_TAR="$1".tar.gz

    if [[ $# -gt 1 ]]; then
        shift
    fi

    tar --ignore-failed-read -zcf "$FILENAME_TAR" "$@"
}

####
# compress given directories into tar.gz
#
# @param string $1 - path to compressed tar.gz file
# @param string $2 - [optional] output path - default is name of the file
#
# @author stev leibelt
# @since 2013-02-02
####
function net_bazzline_decompress ()
{
    if [[ $# -lt 1 ]]; then
        echo 'No valid arguments supplied.'
        echo 'Try net_bazzline_decompress $nameOfCompressedFile [$pathToDecompress]'

        exit 1
    fi

    if [[ $# -eq 1 ]]; then
        tar -zxf "$1"
    else
        tar -zxf "$1" -C "$2"
    fi
}

####
# burns given iso file
#
# @param string $1 - path to iso file
# @param string $2 - [optional] device to burn - default is cdrom
#
# @author stev leibelt
# @since 2013-02-12
####
function net_bazzline_burn ()
{
    if [[ $# -lt 1 ]]; then
        echo 'No valid argument supplied.'
        echo 'Try net_bazzline_burn $isoFile [$opticalDevice]'

        exit 1
    fi

    if [[ $# -eq 1 ]]; then
        sudo wodim -v dev=/dev/cdrom "$1"
    else
        sudo wodim -v dev=/dev/"$2" "$1"
    fi
}

####
# calles find with given param and type f
#
# @param string $1 - pattern you are searching for
# @param [string $2] - path to serching in
#
# @author stev leibelt
# @since 2013-03-08
####
function net_bazzline_find_file ()
{
    if [[ $# -eq 1 ]]; then
        find . -iname "$1" -type f 2>/dev/null
    elif [[ $# -eq 2 ]]; then
        find "$2" -iname "$1" -type f 2>/dev/null
    else
        echo 'No valid argument supplied.'
    fi
}

####
# calles find with given param and type d
#
# @param string $1 - pattern your are searching for
# @param [string $2] - path to serching in
#
# @author stev leibelt
# @since 2013-03-08
####
function net_bazzline_find_directory ()
{
    if [[ $# -eq 1 ]]; then
        find . -iname "$1" -type d 2>/dev/null
    elif [[ $# -eq 2 ]]; then
        find "$2" -iname "$1" -type d 2>/dev/null
    else
        echo 'No valid argument supplied.'
    fi
}

####
# refresh given interface
#
# @param string $1 - [optional] interface - default eth0
#
# @author stev leibelt
# @since 2013-04-30
####
function net_bazzline_refresh_interface ()
{
    if [[ $# -eq 0 ]]; then
        INTERFACE="eth0"
    else
        INTERFACE="$1"
    fi

    sudo ip link set $INTERFACE down
    sudo ip link set $INTERFACE up
    sudo dhcpcd $INTERFACE
}

####
# Show differences between two directories
#
# @param string $1 - path to first directory
# @param string $2 - path to second directory
# 
# @author stev leibelt <artodeto@arcor.de>
# @since 2013-05-21
function net_bazzline_diff_directory ()
{
    if [[ $# -eq 2 ]]; then
        diff -qr "$1" "$2" | sort
    else
        echo 'No valid argument supplied.'
        echo 'Try $command $directory1 $directory2'
    fi
}

####
# Takes a screenshot
# https://wiki.archlinux.org/index.php/Screenshot
#
# @param string $1 - [optional] filename with extension
#
# @author stev leiblt <artodeto@arcor.de>
# @since 2013-05-25
####
function net_bazzline_screenshot ()
{
    if [[ $# -eq 0 ]]; then
        FILENAME='screenshot.jpg'
    else
        FILENAME="$1"
    fi

    import -window root $FILENAME
}

####
# Creates code coverage report by using phpunit
#
# @param string $1 - [optional] directory where to store report
#                    default is "./report"
#
# @author stev leiblt <artodeto@arcor.de>
# @since 2013-06-13
####
function net_bazzline_phpunit_codecoverage ()
{
    if [[ $# -eq 1]]; then
        DIRECTORY_FOR_REPORT="$1"
    else
        DIRECTORY_FOR_REPORT='./report'
    fi

    phpunit --coverage-html $DIRECTORY_FOR_REPORT
}
